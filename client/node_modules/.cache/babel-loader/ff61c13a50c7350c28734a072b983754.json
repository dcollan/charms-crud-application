{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\Danny Collan\\\\OneDrive\\\\Desktop\\\\charm_project\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\Danny Collan\\\\OneDrive\\\\Desktop\\\\charm_project\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{TextField,Button,Typography,Paper}from'@material-ui/core';import FileBase from'react-file-base64';import{useDispatch,useSelector}from'react-redux';import useStyles from'./styles';import{createPost,updatePost}from'../../actions/posts';var Form=function Form(_ref){var currentId=_ref.currentId,setCurrentId=_ref.setCurrentId;var _useState=useState({creator:'',title:'',message:'',tags:'',selectedFile:''}),_useState2=_slicedToArray(_useState,2),postData=_useState2[0],setPostData=_useState2[1];var classes=useStyles();var dispatch=useDispatch();var post=useSelector(function(state){return currentId?state.posts.find(function(p){return p._id===currentId;}):null;});useEffect(function(){if(post)setPostData(post);},[post]);var handleSubmit=function handleSubmit(e){e.preventDefault();if(currentId){dispatch(updatePost(currentId,postData));}else{dispatch(createPost(postData));}clear();};var clear=function clear(){setCurrentId(null);setPostData({creator:'',title:'',message:'',tags:'',selectedFile:''});};return/*#__PURE__*/React.createElement(Paper,{className:classes.paper},/*#__PURE__*/React.createElement(\"form\",{autoComplete:\"off\",noValidate:true,className:\"\".concat(classes.root,\" \").concat(classes.form),onSubmit:handleSubmit},/*#__PURE__*/React.createElement(Typography,{variant:\"h6\"},currentId?'Edit':'Create',\" a Charm\"),/*#__PURE__*/React.createElement(TextField,{name:\"creator\",variant:\"outlined\",label:\"Creator\",fullWidth:true,value:postData.creator,onChange:function onChange(e){return setPostData(_objectSpread(_objectSpread({},postData),{},{creator:e.target.value}));}}),/*#__PURE__*/React.createElement(TextField,{name:\"title\",variant:\"outlined\",label:\"Title\",fullWidth:true,value:postData.title,onChange:function onChange(e){return setPostData(_objectSpread(_objectSpread({},postData),{},{title:e.target.value}));}}),/*#__PURE__*/React.createElement(TextField,{name:\"message\",variant:\"outlined\",label:\"Message\",fullWidth:true,value:postData.message,onChange:function onChange(e){return setPostData(_objectSpread(_objectSpread({},postData),{},{message:e.target.value}));}}),/*#__PURE__*/React.createElement(TextField,{name:\"tags\",variant:\"outlined\",label:\"Tags\",fullWidth:true,value:postData.tags,onChange:function onChange(e){return setPostData(_objectSpread(_objectSpread({},postData),{},{tags:e.target.value.split(',')}));}}),/*#__PURE__*/React.createElement(\"div\",{className:classes.fileInput},/*#__PURE__*/React.createElement(FileBase,{type:\"file\",multiple:false,onDone:function onDone(_ref2){var base64=_ref2.base64;return setPostData(_objectSpread(_objectSpread({},postData),{},{selectedFile:base64}));}})),/*#__PURE__*/React.createElement(Button,{className:classes.buttonSubmit,variant:\"contained\",color:\"primary\",size:\"large\",type:\"submit\",fullWidth:true},\"Submit\"),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"secondary\",size:\"small\",onClick:clear,fullWidth:true},\"Clear\")));};export default Form;","map":{"version":3,"names":["React","useState","useEffect","TextField","Button","Typography","Paper","FileBase","useDispatch","useSelector","useStyles","createPost","updatePost","Form","currentId","setCurrentId","creator","title","message","tags","selectedFile","postData","setPostData","classes","dispatch","post","state","posts","find","p","_id","handleSubmit","e","preventDefault","clear","paper","root","form","target","value","split","fileInput","base64","buttonSubmit"],"sources":["C:/Users/Danny Collan/OneDrive/Desktop/charm_project/client/src/components/Form/Form.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { TextField, Button, Typography, Paper } from '@material-ui/core';\r\nimport FileBase from 'react-file-base64';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport useStyles from './styles';\r\nimport { createPost, updatePost } from '../../actions/posts';\r\n\r\nconst Form = ({ currentId, setCurrentId }) => {\r\n    const [postData, setPostData] = useState({creator: '', title: '', message: '', tags: '', selectedFile: ''});\r\n    \r\n    const classes = useStyles();\r\n    const dispatch = useDispatch();\r\n    const post = useSelector((state) => currentId ? state.posts.find((p) => p._id === currentId) : null);\r\n    \r\n    useEffect(() => {\r\n        if (post) setPostData(post);\r\n      }, [post]);\r\n    \r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n\r\n        if(currentId) {\r\n            dispatch(updatePost(currentId, postData));\r\n        } else {\r\n            dispatch(createPost(postData));\r\n        }\r\n        clear();\r\n    }\r\n\r\n    const clear = () => {\r\n        setCurrentId(null);\r\n    setPostData({ creator: '', title: '', message: '', tags: '', selectedFile: '' });\r\n    }\r\n\r\n    return (\r\n        <Paper className={classes.paper}>\r\n            <form autoComplete=\"off\" noValidate className={`${classes.root} ${classes.form}`} onSubmit={handleSubmit}>\r\n                <Typography variant=\"h6\">\r\n                    {currentId ? 'Edit' : 'Create' } a Charm\r\n                </Typography>\r\n                <TextField name=\"creator\" variant=\"outlined\" label=\"Creator\" fullWidth value={postData.creator} onChange={(e) => setPostData({ ...postData, creator: e.target.value })}/>\r\n                <TextField name=\"title\" variant=\"outlined\" label=\"Title\" fullWidth value={postData.title} onChange={(e) => setPostData({ ...postData, title: e.target.value })} />\r\n                <TextField name=\"message\" variant=\"outlined\" label=\"Message\" fullWidth value={postData.message} onChange={(e) => setPostData({ ...postData, message: e.target.value })} />\r\n                <TextField name=\"tags\" variant=\"outlined\" label=\"Tags\" fullWidth value={postData.tags} onChange={(e) => setPostData({ ...postData, tags: e.target.value.split(',') })} />\r\n            <div className={classes.fileInput}><FileBase type=\"file\" multiple={false} onDone={({base64}) => setPostData({ ...postData, selectedFile: base64})}/></div>\r\n            <Button className={classes.buttonSubmit} variant=\"contained\" color=\"primary\" size=\"large\" type=\"submit\" fullWidth>Submit</Button>\r\n            <Button variant=\"contained\" color=\"secondary\" size=\"small\" onClick={clear} fullWidth>Clear</Button>\r\n            </form>\r\n        </Paper>\r\n    );\r\n}\r\n\r\nexport default Form;"],"mappings":"yXAAA,MAAOA,MAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,SAAS,CAAEC,MAAM,CAAEC,UAAU,CAAEC,KAAK,KAAQ,mBAAmB,CACxE,MAAOC,SAAQ,KAAM,mBAAmB,CACxC,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,MAAOC,UAAS,KAAM,UAAU,CAChC,OAASC,UAAU,CAAEC,UAAU,KAAQ,qBAAqB,CAE5D,GAAMC,KAAI,CAAG,QAAPA,KAAI,MAAoC,IAA9BC,UAAS,MAATA,SAAS,CAAEC,YAAY,MAAZA,YAAY,CACnC,cAAgCd,QAAQ,CAAC,CAACe,OAAO,CAAE,EAAE,CAAEC,KAAK,CAAE,EAAE,CAAEC,OAAO,CAAE,EAAE,CAAEC,IAAI,CAAE,EAAE,CAAEC,YAAY,CAAE,EAAE,CAAC,CAAC,wCAApGC,QAAQ,eAAEC,WAAW,eAE5B,GAAMC,QAAO,CAAGb,SAAS,EAAE,CAC3B,GAAMc,SAAQ,CAAGhB,WAAW,EAAE,CAC9B,GAAMiB,KAAI,CAAGhB,WAAW,CAAC,SAACiB,KAAK,QAAKZ,UAAS,CAAGY,KAAK,CAACC,KAAK,CAACC,IAAI,CAAC,SAACC,CAAC,QAAKA,EAAC,CAACC,GAAG,GAAKhB,SAAS,GAAC,CAAG,IAAI,GAAC,CAEpGZ,SAAS,CAAC,UAAM,CACZ,GAAIuB,IAAI,CAAEH,WAAW,CAACG,IAAI,CAAC,CAC7B,CAAC,CAAE,CAACA,IAAI,CAAC,CAAC,CAEZ,GAAMM,aAAY,CAAG,QAAfA,aAAY,CAAIC,CAAC,CAAK,CACxBA,CAAC,CAACC,cAAc,EAAE,CAElB,GAAGnB,SAAS,CAAE,CACVU,QAAQ,CAACZ,UAAU,CAACE,SAAS,CAAEO,QAAQ,CAAC,CAAC,CAC7C,CAAC,IAAM,CACHG,QAAQ,CAACb,UAAU,CAACU,QAAQ,CAAC,CAAC,CAClC,CACAa,KAAK,EAAE,CACX,CAAC,CAED,GAAMA,MAAK,CAAG,QAARA,MAAK,EAAS,CAChBnB,YAAY,CAAC,IAAI,CAAC,CACtBO,WAAW,CAAC,CAAEN,OAAO,CAAE,EAAE,CAAEC,KAAK,CAAE,EAAE,CAAEC,OAAO,CAAE,EAAE,CAAEC,IAAI,CAAE,EAAE,CAAEC,YAAY,CAAE,EAAG,CAAC,CAAC,CAChF,CAAC,CAED,mBACI,oBAAC,KAAK,EAAC,SAAS,CAAEG,OAAO,CAACY,KAAM,eAC5B,4BAAM,YAAY,CAAC,KAAK,CAAC,UAAU,MAAC,SAAS,WAAKZ,OAAO,CAACa,IAAI,aAAIb,OAAO,CAACc,IAAI,CAAG,CAAC,QAAQ,CAAEN,YAAa,eACrG,oBAAC,UAAU,EAAC,OAAO,CAAC,IAAI,EACnBjB,SAAS,CAAG,MAAM,CAAG,QAAQ,CAAE,UACpC,CAAa,cACb,oBAAC,SAAS,EAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,UAAU,CAAC,KAAK,CAAC,SAAS,CAAC,SAAS,MAAC,KAAK,CAAEO,QAAQ,CAACL,OAAQ,CAAC,QAAQ,CAAE,kBAACgB,CAAC,QAAKV,YAAW,gCAAMD,QAAQ,MAAEL,OAAO,CAAEgB,CAAC,CAACM,MAAM,CAACC,KAAK,GAAG,EAAC,EAAE,cACzK,oBAAC,SAAS,EAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,MAAC,KAAK,CAAElB,QAAQ,CAACJ,KAAM,CAAC,QAAQ,CAAE,kBAACe,CAAC,QAAKV,YAAW,gCAAMD,QAAQ,MAAEJ,KAAK,CAAEe,CAAC,CAACM,MAAM,CAACC,KAAK,GAAG,EAAC,EAAG,cAClK,oBAAC,SAAS,EAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,UAAU,CAAC,KAAK,CAAC,SAAS,CAAC,SAAS,MAAC,KAAK,CAAElB,QAAQ,CAACH,OAAQ,CAAC,QAAQ,CAAE,kBAACc,CAAC,QAAKV,YAAW,gCAAMD,QAAQ,MAAEH,OAAO,CAAEc,CAAC,CAACM,MAAM,CAACC,KAAK,GAAG,EAAC,EAAG,cAC1K,oBAAC,SAAS,EAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,UAAU,CAAC,KAAK,CAAC,MAAM,CAAC,SAAS,MAAC,KAAK,CAAElB,QAAQ,CAACF,IAAK,CAAC,QAAQ,CAAE,kBAACa,CAAC,QAAKV,YAAW,gCAAMD,QAAQ,MAAEF,IAAI,CAAEa,CAAC,CAACM,MAAM,CAACC,KAAK,CAACC,KAAK,CAAC,GAAG,CAAC,GAAG,EAAC,EAAG,cAC7K,2BAAK,SAAS,CAAEjB,OAAO,CAACkB,SAAU,eAAC,oBAAC,QAAQ,EAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAE,KAAM,CAAC,MAAM,CAAE,0BAAEC,OAAM,OAANA,MAAM,OAAMpB,YAAW,gCAAMD,QAAQ,MAAED,YAAY,CAAEsB,MAAM,GAAE,EAAC,EAAE,CAAM,cAC1J,oBAAC,MAAM,EAAC,SAAS,CAAEnB,OAAO,CAACoB,YAAa,CAAC,OAAO,CAAC,WAAW,CAAC,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,OAAC,QAAM,CAAS,cACjI,oBAAC,MAAM,EAAC,OAAO,CAAC,WAAW,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAET,KAAM,CAAC,SAAS,OAAC,OAAK,CAAS,CAC5F,CACH,CAEhB,CAAC,CAED,cAAerB,KAAI"},"metadata":{},"sourceType":"module"}